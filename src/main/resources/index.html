<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Inloggen met Dappre</title>
    <style type="text/css">body{background-color:#3395d3;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;text-align:center}#qrcode-container{text-align:center;display:inline-block;background:white;padding:20px 20px 10px 20px;width:210px;height:auto;color:black;border-radius:6px}#qrcode-container h1,#qrcode-container h2{font-weight:600;margin:0;padding:0}#qrcode-container h1{font-size:36px;line-height:40px;text-transform:uppercase}#qrcode-container h2{font-size:28px;line-height:28px;margin-bottom:16px}#qrcode-container #qrcode{display:inline-block;width:200px;height:200px;background:#efefef}#qrcode-container #how-to-connect{width:200px;display:inline-block;text-align:left;margin:16px 0;font-size:12px;line-height:12px}#qrcode-container #how-to-connect p{margin:3px 0}#qrcode-container #how-to-connect p svg{float:left;margin-right:8px;margin-top:-2px}#qrcode-container #qiy-trust-principles p{margin:0}#qrcode-container #qiy-trust-principles p a{text-decoration:none;line-height:16px;font-size:12px;font-weight:500;color:black}#qrcode-container #qiy-trust-principles p a:hover{opacity:.7}#qrcode-container #qiy-trust-principles p a svg{transform:translateY(2px)}#stores ul.app-badges{margin:30px 0 10px 0;padding:0}#stores ul.app-badges li{list-style-type:none;display:inline;margin:0 5px}#stores ul.app-badges li a.app-store-badge{display:inline-block;width:110px;height:40px;text-indent:-9999px;background:url(../img/download_on_the_app_store_badge_us-uk_135x40.svg) no-repeat;background-size:contain}#stores ul.app-badges li a.google-play-badge{display:inline-block;width:110px;height:40px;text-indent:-9999px;background:url(../img/get_it_on_google_play.svg) no-repeat;background-size:contain}#help{font-size:.8em}#help a{color:white}</style>
</head>
<body>

<svg  style="display: none;">
    <symbol id="dappre-app-icon">
        <svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <style>.cls-1{fill:#00abc1;}.cls-2{fill:#fff;}.cls-3{fill:#666;}</style>
            </defs>
            <title>dappre_app_icon_rounded</title>
            <g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><g id="bg"><rect class="cls-1" width="400" height="400" rx="90" ry="90"/></g><path id="figures" class="cls-2" d="M343.9,240.13c-.44-6-3-11.7-8-15.21-5.35-3.71-12.17-4.86-18.53-5.42-6.82-.6-13.69-.45-20.48-1.35-2.61-.35-5.71-.93-7.51-3s-1.38-4.89-.29-7.08c1.31-2.65,3.7-4.56,6-6.37a52.58,52.58,0,0,0,6.53-6,32.26,32.26,0,0,0,7.58-16.89C311,166.33,308,153,299.9,143.27A37,37,0,0,0,271,129.73c-10.87.23-20.89,5.81-27.53,14.3a45.41,45.41,0,0,0-9.06,31.62,34.35,34.35,0,0,0,6.12,17.71,37.6,37.6,0,0,0,6.13,6.47c2.32,2,4.86,3.71,6.78,6.08,1.73,2.14,3.1,5.3,1.87,8-.93,2-3.24,3-5.26,3.59-6,1.68-12.35,1-18.48,1.3-11,.58-26.33,2.94-30.33,15.15a34.29,34.29,0,0,0-1.3,9.33c-.17-4.1-.44-8.1-2.34-11.82a18.53,18.53,0,0,0-7.82-7.78c-7.18-3.9-16-4.73-24.06-5-4.42-.14-8.9.14-13.27-.63-3.28-.58-7.9-1.85-8.28-5.79-.37-3.75,2.32-6.65,4.88-9,2.83-2.57,5.93-4.86,8.51-7.69,5.11-5.6,7.39-13.09,7.89-20.53a47,47,0,0,0-3.64-22c-5.93-13.53-19.14-23.49-34.2-23.33-15.32.16-28.43,10.59-34.06,24.5-5.45,13.46-4.93,31.36,5.6,42.24,2.59,2.67,5.56,4.91,8.28,7.43,2.38,2.22,4.93,5.35,4.24,8.84-.59,3-3.4,4.35-6.13,5a61.51,61.51,0,0,1-11,1.16c-13.88.64-34.06.49-38,17.48-.68,2.94-1,6.45,1.08,8.93,2.29,2.73,6,2.94,9,1.38,3.22-1.66,4.69-5.06,7.59-7.07,3.07-2.13,7.05-2.6,10.69-2.76,8-.34,16,.05,23.81-1.85,6.9-1.67,13.54-5.09,16.77-11.71A28,28,0,0,0,128,212.09a33.14,33.14,0,0,0,1.37,9.55,17.72,17.72,0,0,0,5,7.46c4.49,4,10.6,5.59,16.38,6.52a87.48,87.48,0,0,0,10.25,1c3.43.15,6.86,0,10.28.21,4.57.24,13.24,1.28,12.46,7.72-.38,3.11-2.55,5.52-4.82,7.5s-4.81,3.87-7,6.06a31.55,31.55,0,0,0-8.74,16.68c-2.32,12.16.09,25.43,7.5,35.46,6.34,8.59,16.09,14.57,26.84,15.32,11.26.78,22.31-4.24,29.69-12.67,7.64-8.72,11.17-20.71,10.41-32.2A36.76,36.76,0,0,0,232.75,264a32.08,32.08,0,0,0-5.94-7.09c-2.36-2.14-5-4-7.23-6.29-1.94-2-3.6-4.52-3.4-7.41.18-2.49,2.15-4,4.32-4.85,6.15-2.43,13.21-1.46,19.67-1.81,11-.61,26.11-2.78,30.4-14.82a32.64,32.64,0,0,0,1.4-9.67c.26,6.28,1.82,12.64,6.71,16.94s11.34,6,17.52,6.82c6.86.95,13.76.48,20.63,1.09,3.1.27,6.39.91,9,2.76,2.31,1.66,3.71,4.23,5.94,6a7.79,7.79,0,0,0,8.31,1.27A7.12,7.12,0,0,0,343.9,240.13ZM106.61,170.24a24,24,0,0,1,8.54-18.43,20.29,20.29,0,0,1,20.26-3.14c14.21,5.63,18.73,26.34,8.38,37.56-3.2,3.47-7.39,5.83-10.66,9.23A19.05,19.05,0,0,0,128,207.86a19.76,19.76,0,0,0-2.43-8.82,24.07,24.07,0,0,0-5.85-6.4c-4.34-3.55-9.05-6.83-11.28-12.19A26.52,26.52,0,0,1,106.61,170.24ZM221.35,285.12a24,24,0,0,1-8.54,18.43,20.29,20.29,0,0,1-20.26,3.14c-14.21-5.63-18.73-26.34-8.38-37.56,3.2-3.47,7.39-5.83,10.66-9.23A19.05,19.05,0,0,0,200,247.5a19.76,19.76,0,0,0,2.43,8.82,24.07,24.07,0,0,0,5.85,6.4c4.34,3.55,9.05,6.83,11.28,12.19A26.52,26.52,0,0,1,221.35,285.12ZM272,207.86a19.6,19.6,0,0,0-6.44-13.64c-4.06-3.71-8.89-6.44-11.8-11.27-5.33-8.87-3.84-21.6,3.22-29.09a21,21,0,0,1,12.75-6.55,20.48,20.48,0,0,1,14.54,4.07c8.44,6.36,11.13,18.37,7.62,28.12A20.16,20.16,0,0,1,287,187c-2.19,2.16-4.73,3.93-7.1,5.88a23.46,23.46,0,0,0-5.54,6.29A19.3,19.3,0,0,0,272,207.86Z"/><path id="app-corner" class="cls-2" d="M0,90v51.44A163.33,163.33,0,0,0,161.83,0H90A90,90,0,0,0,0,90Z"/><path id="qiy-logo" class="cls-3" d="M104.51,64a16.29,16.29,0,0,0-4.4-8.43,30,30,0,0,0-7.79-5.86,47.62,47.62,0,0,0-8.81-3.6,62,62,0,0,0-9.23-2,67.63,67.63,0,0,0-16.89-.26,6.51,6.51,0,0,0-12.74,2.53s0,.06,0,.09a46.77,46.77,0,0,0-7.82,3.25,30,30,0,0,0-7.79,5.86A16.27,16.27,0,0,0,24.67,64a13.87,13.87,0,0,0,2.58,10.24c2.61,3.79,7.05,7.24,13.23,9.87a62.17,62.17,0,0,0,24.11,4.53A66.69,66.69,0,0,0,81.5,86.48a7.75,7.75,0,0,0,3.39,2c3.37.65,7.58-2,9.19-4.33a11.09,11.09,0,0,1-2.45-1.53,27.76,27.76,0,0,0,10.29-8.47A13.88,13.88,0,0,0,104.51,64Zm-9.12,7a26,26,0,0,1-9.17,6.48C85,76,83.88,74.66,83.15,73.71c-2-2.64-3.57-6.22-6-8.51s-5.43-1.27-8.09.22c-1.9,1.07-3.8,2.22-5.76,2.43a5.51,5.51,0,0,1-3.89-1.08c-2.6-1.84-3.89-4.93-4.92-7.82-.71-2-1.22-6-4-6.14-1.55-.07-2.38,1.85-2.58,3-1.28,7,2.31,21.87,9.85,24.63,2.76,1,5.51-.77,7.77-2.21s3.66-3.63,5.33-5.64c.09-.1,4.26,6.12,4.64,6.64l.93,1.25a59.26,59.26,0,0,1-11.87,1.21,55.11,55.11,0,0,1-19.3-3.28c-5.13-1.94-9-4.53-11.5-7.44a12,12,0,0,1-3.2-8.22,12,12,0,0,1,2.92-7.18,22.84,22.84,0,0,1,6.34-5.22,36.58,36.58,0,0,1,5.21-2.41,6.51,6.51,0,0,0,12.56-3,59.17,59.17,0,0,1,15.78.2A52.6,52.6,0,0,1,81.67,47a38.69,38.69,0,0,1,7.65,3.32,22.82,22.82,0,0,1,6.34,5.22,12,12,0,0,1,2.92,7.18A12,12,0,0,1,95.38,70.92Z"/><g id="border"><path class="cls-1" d="M310,5a85.1,85.1,0,0,1,85,85V310a85.1,85.1,0,0,1-85,85H90A85.1,85.1,0,0,1,5,310V90A85.1,85.1,0,0,1,90,5H310m0-5H90A90,90,0,0,0,0,90V310a90,90,0,0,0,90,90H310a90,90,0,0,0,90-90V90A90,90,0,0,0,310,0Z"/></g></g></g>
        </svg>
    </symbol>
    <symbol id="qiy-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 30">
            <path fill="#000000" d="M48.9,15.1c-0.3-1.8-1.2-3.5-2.6-5c-1.3-1.4-2.9-2.5-4.7-3.5c-1.6-0.9-3.4-1.6-5.3-2.2c-1.8-0.5-3.6-0.9-5.5-1.2C29,2.9,27,2.8,25,2.8c-1.5,0-2.9,0.1-4.3,0.2c-0.5-1.8-2.3-3-4.2-2.8c-2.1,0.2-3.7,2.2-3.4,4.3c0,0,0,0,0,0.1c-1.6,0.5-3.2,1.2-4.7,1.9C6.6,7.5,5,8.6,3.7,10c-1.5,1.6-2.4,3.3-2.6,5c-0.3,2,0.2,4.1,1.5,6.1c1.6,2.3,4.2,4.3,7.9,5.9c4,1.7,9,2.7,14.4,2.7c3.6,0,7.1-0.5,10.1-1.3c0.6,0.6,1.3,1.1,2,1.2c2,0.4,4.5-1.2,5.5-2.6c-0.4-0.2-0.9-0.5-1.5-0.9c2.8-1.4,4.9-3.2,6.2-5.1C48.7,19.2,49.2,17.1,48.9,15.1z M43.4,19.2c-1.3,1.5-3.1,2.8-5.5,3.9c-0.7-0.8-1.4-1.6-1.8-2.2c-1.2-1.6-2.1-3.7-3.6-5.1c-1.5-1.4-3.3-0.8-4.8,0.1c-1.1,0.6-2.3,1.3-3.4,1.5c-0.8,0.1-1.5-0.1-2.3-0.6c-1.6-1.1-2.3-3-2.9-4.7c-0.4-1.2-0.7-3.6-2.4-3.7c-0.9,0-1.4,1.1-1.5,1.8c-0.8,4.2,1.4,13.1,5.9,14.7c1.7,0.6,3.3-0.5,4.7-1.3c1.3-0.9,2.2-2.2,3.2-3.4c0.1-0.1,2.6,3.7,2.8,4c0.2,0.3,0.4,0.5,0.6,0.8c-2.2,0.5-4.6,0.7-7.1,0.7c-4.3,0-8.3-0.7-11.6-2C10.4,22.5,8,21,6.6,19.2c-1.3-1.6-2-3.3-1.9-4.9c0.1-1.5,0.6-2.9,1.7-4.3c1-1.2,2.3-2.3,3.8-3.1c1-0.6,2-1,3.1-1.4c0.6,1.6,2.3,2.7,4.1,2.5c2.1-0.2,3.7-2.2,3.4-4.3c1.3-0.2,2.7-0.3,4.2-0.3c1.8,0,3.6,0.1,5.3,0.4c1.7,0.3,3.4,0.6,5,1.1c1.6,0.5,3.2,1.2,4.6,2c1.5,0.9,2.8,1.9,3.8,3.1c1.1,1.4,1.7,2.8,1.7,4.3C45.4,16,44.8,17.7,43.4,19.2z"/>
        </svg>
    </symbol>
</svg>

<br>

<div id="qrcode-container">
    <h1>Inloggen</h1>
    <h2>met Dappre</h2>
    <div id="qrcode">
    	<a href="$dappreappuri$"><img src="data:image/png;base64,$connectqrcode$" /></a>
    </div>
    <div id="how-to-connect">
        <p>
            <svg width="40" height="40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <use xlink:href="#dappre-app-icon" />
            </svg>
            Gebruik Dappre op je telefoon om de code te scannen
        </p>
    </div>

    <div id="qiy-trust-principles">
        <p>
            <a href="https://www.qiyfoundation.boxtel/nl/qiy-trust-principles/" target="_blank">
                <svg width="20" height="14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <use xlink:href="#qiy-icon" />
                </svg>
                Based on Qiy Trust Principles
            </a>
        </p>
    </div>
</div>

<div id="help">
    <a href="#">Problemen met inloggen?</a>
</div>

<div id="qrJSON" style="display:'none'">$connectjson$</div>
<div id="formHolder" style="display: 'none'"></div>


<script type="text/javascript" id="evtSourceScript"> 
var watchUrl = "$notificationuri$";
console.log("watching ", watchUrl);
var evtSource = new EventSource(watchUrl);

evtSource.addEventListener("loggedIn", function(e) {
	console.log("loggedIn received", e);
	data = JSON.parse(e.data);
	if (data.page) {
		var a = new DOMParser().parseFromString(data.page, "text/html");
		var b = document.importNode(a.querySelector("form"), true);
		document.getElementById("formHolder").appendChild(b);
		document.forms[0].submit();
	} else if (data.url) {
		document.location.href = data.url;
	} else {
		console.log("do not know what to do with data");
	}
}, false);

evtSource.onerror = function(e) {
	console.log("error, closing", arguments);
	evtSource.close();
	evtSource = null;
}

</script>

</body>
</html>